@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@model IPublishedContent

@{ 
    var childSelection = Model.Children.Where(x => x.IsVisible() && x.Id!=Model.Id); 


    if (childSelection.Count()>0){
        var i=1;
      
        <div class="px-container-space pb-offset"> 
            <div class="row align-items-start justify-content-center">
            
                @foreach (var item in childSelection){
                    var j=1;
                    var imgBg="";  
                    var imgBg2="";  
                        
                    <div class="col-12 col-md-6 col-lg-4 position-relative "> 
                        <div class="listing-box">
                            @if (item.HasValue("imageForListing")){
                                var img = item.Value<IPublishedContent>("imageForListing");
                                if (img!=null){
                                    <div class="img-holder">
                                        <a href="@item.Url()" title="@Html.Raw(item.Value("menuTitle"))">
                                        <picture>
                                            <source srcset="@img.GetCropUrl("vertical-lg")&quality=70&format=webp" media="(min-width: 1480px)" type="image/webp">
                                            <source srcset="@img.GetCropUrl("vertical-lg")&quality=70" media="(min-width: 1480px)" type="image/jpeg">
                                            <source srcset="@img.GetCropUrl("vertical")&quality=70&format=webp" media="(min-width: 768px)" type="image/webp">
                                            <source srcset="@img.GetCropUrl("vertical")&quality=70" media="(min-width: 768px)" type="image/jpeg">
                                            <source srcset="@img.GetCropUrl("square-md")&quality=70&format=webp" media="(min-width: 576px)" type="image/webp">
                                            <source srcset="@img.GetCropUrl("square-md")&quality=70" media="(min-width: 576px)" type="image/jpeg">
                                            <source srcset="@img.GetCropUrl("square")&quality=70&format=webp" media="(min-width: 0px)" type="image/webp">
                                            <source srcset="@img.GetCropUrl("square")&quality=70" media="(min-width: 0px)" type="image/jpeg">
                                            <img src="@img.GetCropUrl("square")&quality=70" alt="@Html.Partial("/Views/Partials/Shared/_AltTextImage.cshtml", img)" class="img-fluid">
                                        </picture></a>
                                    </div>
                                }
                            }
                            
                            <div class="mt-2">
                                <h2 class="sm-header">
                                    @item.Value("menuTitle")
                                </h2>
                                @if (item.HasValue("shortDescription")){
                                    <div>@item.Value("shortDescription")</div>
                                }
                                <div class="mt-3">
                                    <a href="@item.Url()" title="@item.Value("menuTitle")" class="btn btn--more white text-center">@Umbraco.GetDictionaryValue("explore")</a>
                                </div>
                            </div>
                            
                        </div>
                    </div>    
                    i++;
                }  
        </div>
        </div>
    }
}
